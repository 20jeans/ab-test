/*
 * @license
 * ab-test v0.0.1
 * (c) 2014 Daniel Lamb http://daniellmb.com
 * License: MIT
 */
angular.module("ab.test",["ab.test.directive"]),angular.module("ab.test.directive",["ab.test.service","ngAnimate"]).factory("ab",["abMfg",function(t){return t()}]).controller("abTestCtrl",["$scope","ab",function(t,e){var a=this,n=a.control,r=a.variants=[],i=t.shown||angular.noop;a.add=function(t){t.index=r.length,r.push(t),t.control&&(a.control=n=t)},t.run=function(){a.variant&&(a.variant.active=!1);var c=e.test(r,t.frequency);c?(c.active=!0,a.variant=c,i(c)):n&&(n.active=!0,a.variant=n,i(n))}}]).directive("abTest",["abTestLink",function(t){return{restrict:"EA",replace:!0,transclude:!0,template:"<div ng-transclude></div>",controller:"abTestCtrl",scope:{run:"=?abRun",shown:"=?abShown",frequency:"=abFrequency"},compile:function(e,a){if(!angular.isDefined(a.abFrequency))throw new Error("ab-test: ab-frequency attribute required");return t}}}]).factory("abTestLink",function(){return function(t,e,a,n){var r=t.frequency;if(isNaN(r)||1e-4>r||r>1)throw new Error("ab-test: test frequency must be a float between 0.0001 and 1");if(0===n.variants.length)throw new Error("ab-test: no variants found for the a/b test");t.run()}}).directive("abVariant",["abVariantLink",function(t){return{require:"^abTest",restrict:"EA",replace:!0,transclude:!0,template:'<div ng-transclude ng-show="active" class="ng-class:{\'ab-active\':active}; ab-animate"></div>',scope:{active:"=?abActive",control:"=?abControl",data:"=?abData"},controller:angular.noop,link:t}}]).factory("abVariantLink",function(){return function(t,e,a,n){n.add(t)}});